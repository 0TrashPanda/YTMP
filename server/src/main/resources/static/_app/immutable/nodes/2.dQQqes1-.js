import{f as q,a as O}from"../chunks/C8M7rRkc.js";import{i as de}from"../chunks/BZ4iq1dr.js";import{e as ae,H as ue,P as G,h as M,a4 as ce,I as _e,t as g,U as he,K as pe,M as me,O as le,Q as K,i as z,a5 as be,a6 as xe,a7 as ge,c as P,f as re,s as ye,a8 as F,a9 as ne,aa as oe,z as we,ab as Ee,r as fe,p as Ne,ac as Te,ad as ke,ae as X,af as Se,ag as Ie,ah as Ae,ai as Ce,d as De,aj as Me,ak as Qe,l as L,al as Re,am as He,A as Pe,E,F as y,G as C,v as J,C as Y,D as Oe,W as H}from"../chunks/BRS3R6i2.js";import{s as $,e as W}from"../chunks/YZ6kCU33.js";import{p as qe,i as te}from"../chunks/9xMNxIP_.js";import{r as Ve}from"../chunks/BEqLailA.js";import{c as Fe}from"../chunks/y7ekbI0C.js";function se(e,a){return a}function Ue(e,a,r){for(var u=[],o=a.length,s=0;s<o;s++)Ie(a[s].e,u,!0);Ae(u,()=>{var v=u.length===0&&r!==null;if(v){var t=r,f=t.parentNode;Ce(f),f.append(t),e.items.clear(),A(e,a[0].prev,a[o-1].next)}for(var n=0;n<o;n++){var l=a[n];v||(e.items.delete(l.k),A(e,l.prev,l.next)),De(l.e,!v)}e.first===a[0]&&(e.first=a[0].prev)})}function ie(e,a,r,u,o,s=null){var v=e,t=new Map,f=null;{var n=e;v=M?G(ce(n)):n.appendChild(ae())}M&&_e();var l=null,c=he(()=>{var h=r();return we(h)?h:h==null?[]:oe(h)}),b,_=!0;function i(){ze(T,b,v,a,u),l!==null&&(b.length===0?(l.fragment?(v.before(l.fragment),l.fragment=null):fe(l.effect),w.first=l.effect):Ne(l.effect,()=>{l=null}))}var w=ue(()=>{b=g(c);var h=b.length;let x=!1;if(M){var S=pe(v)===me;S!==(h===0)&&(v=le(),G(v),K(!1),x=!0)}for(var I=new Set,k=P,D=null,d=ye(),p=0;p<h;p+=1){M&&z.nodeType===be&&z.data===xe&&(v=z,x=!0,K(!1));var m=b[p],Q=u(m,p),N=_?null:t.get(Q);N?(ge(N.v,m),N.i=p,d&&k.skipped_effects.delete(N.e)):(N=Le(_?v:null,D,m,Q,p,o,a,r),_&&(N.o=!0,D===null?f=N:D.next=N,D=N),t.set(Q,N)),I.add(Q)}if(h===0&&s&&!l)if(_)l={fragment:null,effect:re(()=>s(v))};else{var U=document.createDocumentFragment(),R=ae();U.append(R),l={fragment:U,effect:re(()=>s(R))}}if(M&&h>0&&G(le()),!_)if(d){for(const[V,B]of t)I.has(V)||k.skipped_effects.add(B.e);k.oncommit(i),k.ondiscard(()=>{})}else i();x&&K(!0),g(c)}),T={effect:w,items:t,first:f};_=!1,M&&(v=z)}function ze(e,a,r,u,o){var s=a.length,v=e.items,t=e.first,f,n=null,l=[],c=[],b,_,i,w;for(w=0;w<s;w+=1){if(b=a[w],_=o(b,w),i=v.get(_),e.first??=i,!i.o){i.o=!0;var T=n?n.next:t;A(e,n,i),A(e,i,T),Z(i,T,r),n=i,l=[],c=[],t=n.next;continue}if((i.e.f&X)!==0&&fe(i.e),i!==t){if(f!==void 0&&f.has(i)){if(l.length<c.length){var h=c[0],x;n=h.prev;var S=l[0],I=l[l.length-1];for(x=0;x<l.length;x+=1)Z(l[x],h,r);for(x=0;x<c.length;x+=1)f.delete(c[x]);A(e,S.prev,I.next),A(e,n,S),A(e,I,h),t=h,n=I,w-=1,l=[],c=[]}else f.delete(i),Z(i,t,r),A(e,i.prev,i.next),A(e,i,n===null?e.first:n.next),A(e,n,i),n=i;continue}for(l=[],c=[];t!==null&&t.k!==_;)(t.e.f&X)===0&&(f??=new Set).add(t),c.push(t),t=t.next;if(t===null)continue;i=t}l.push(i),n=i,t=i.next}if(t!==null||f!==void 0){for(var k=f===void 0?[]:oe(f);t!==null;)(t.e.f&X)===0&&k.push(t),t=t.next;var D=k.length;if(D>0){var d=s===0?r:null;Ue(e,k,d)}}}function Le(e,a,r,u,o,s,v,t){var f=(v&Te)!==0,n=(v&ke)===0,l=f?n?F(r,!1,!1):ne(r):r,c=(v&Ee)===0?o:ne(o),b={i:c,v:l,k:u,a:null,e:null,o:!1,prev:a,next:null};try{if(e===null){var _=document.createDocumentFragment();_.append(e=ae())}return b.e=re(()=>s(e,l,c,t)),a!==null&&(a.next=b),b}finally{}}function Z(e,a,r){for(var u=e.next?e.next.e.nodes_start:r,o=a?a.e.nodes_start:r,s=e.e.nodes_start;s!==null&&s!==u;){var v=Se(s);o.before(s),s=v}}function A(e,a,r){a===null?(e.first=r,e.effect.first=r&&r.e):(a.e.next&&(a.e.next.prev=null),a.next=r,a.e.next=r&&r.e),r===null?e.effect.last=a&&a.e:(r.e.prev&&(r.e.prev.next=null),r.prev=a,r.e.prev=a&&a.e)}function We(e,a,r=a){var u=new WeakSet;Me(e,"input",async o=>{var s=o?e.defaultValue:e.value;if(s=j(e)?ee(s):s,r(s),P!==null&&u.add(P),await Qe(),s!==(s=a())){var v=e.selectionStart,t=e.selectionEnd,f=e.value.length;if(e.value=s??"",t!==null){var n=e.value.length;v===t&&t===f&&n>f?(e.selectionStart=n,e.selectionEnd=n):(e.selectionStart=v,e.selectionEnd=Math.min(t,n))}}}),(M&&e.defaultValue!==e.value||L(a)==null&&e.value)&&(r(j(e)?ee(e.value):e.value),P!==null&&u.add(P)),Re(()=>{var o=a();if(e===document.activeElement){var s=He??P;if(u.has(s))return}j(e)&&o===ee(e.value)||e.type==="date"&&!o&&!e.value||o!==e.value&&(e.value=o??"")})}function j(e){var a=e.type;return a==="number"||a==="range"}function ee(e){return e===""?null:+e}var Ye=q('<div class="text-sm text-gray-400 truncate"> </div>'),$e=q('<div class="flex items-center justify-between p-3 hover:bg-[#222] border-b border-[#222]"><div class="truncate"><div class="font-semibold truncate"> </div> <!></div> <div class="relative group"><button class="p-2 hover:bg-[#333] rounded">☰</button> <div class="absolute right-0 mt-2 w-40 bg-[#181818] rounded shadow-xl opacity-0 group-hover:opacity-100 transition"><button class="block w-full text-left px-4 py-2 hover:bg-[#222]">▶ Play Now</button> <button class="block w-full text-left px-4 py-2 hover:bg-[#222]">⏭ Play Next</button> <button class="block w-full text-left px-4 py-2 hover:bg-[#222]">➕ Add to Queue</button></div></div></div>');function ve(e,a){Pe(a,!1);let r=qe(a,"song",8);const u=Fe(),o=()=>u("playNow",r()),s=()=>u("playNext",r()),v=()=>u("addToQueue",r());de();var t=$e(),f=E(t),n=E(f),l=E(n,!0);y(n);var c=C(n,2);{var b=x=>{var S=Ye(),I=E(S,!0);y(S),Y(()=>$(I,(J(r()),L(()=>r().artist)))),O(x,S)};te(c,x=>{J(r()),L(()=>r().artist)&&x(b)})}y(f);var _=C(f,2),i=C(E(_),2),w=E(i),T=C(w,2),h=C(T,2);y(i),y(_),y(t),Y(()=>$(l,(J(r()),L(()=>r().title)))),W("click",w,o),W("click",T,s),W("click",h,v),O(e,t),Oe()}var Be=q('<div class="text-gray-400 mt-1"> </div>'),Ge=q('<div><div class="text-2xl font-semibold"> </div> <!></div>'),Ke=q('<div class="text-gray-600">Select a song</div>'),Xe=q('<div class="h-screen flex bg-[#111] text-white overflow-hidden"><div class="w-1/3 border-r border-[#222] flex flex-col overflow-hidden"><div class="p-4 bg-[#181818] sticky top-0 z-10 shadow-md"><input placeholder="Search songs…" class="w-full p-3 rounded-lg bg-[#202020] placeholder-gray-500"/></div> <div class="flex-1 overflow-y-auto"></div></div> <div class="w-1/3 border-r border-[#222] flex flex-col"><div class="flex-1 flex items-center justify-center text-center"><!></div></div> <div class="w-1/3 flex flex-col overflow-hidden"><div class="p-4 bg-[#181818] border-b border-[#222]"><div class="text-xl font-semibold">Queue</div></div> <div class="flex-1 overflow-y-auto"></div></div></div>');function la(e){let a=F(""),r=F([]),u=F([]),o=F(null),s=null;async function v(){if(!g(a).trim()){H(r,[]);return}console.log("Searching:",g(a));try{const p=await(await fetch(`http://localhost:7000/search?q=${encodeURIComponent(g(a))}`)).json();H(r,p.results??p??[]),console.log("Search results:",g(r))}catch(d){console.error("Search error:",d)}}function t(){clearTimeout(s),s=setTimeout(v,300)}function f(d){H(o,d)}function n(d){H(u,[d,...g(u)])}function l(d){H(u,[...g(u),d])}var c=Xe(),b=E(c),_=E(b),i=E(_);Ve(i),y(_);var w=C(_,2);ie(w,5,()=>g(r),se,(d,p)=>{ve(d,{get song(){return g(p)},$$events:{playNow:m=>f(m.detail),playNext:m=>n(m.detail),addToQueue:m=>l(m.detail)}})}),y(w),y(b);var T=C(b,2),h=E(T),x=E(h);{var S=d=>{var p=Ge(),m=E(p),Q=E(m,!0);y(m);var N=C(m,2);{var U=R=>{var V=Be(),B=E(V,!0);y(V),Y(()=>$(B,g(o).artist)),O(R,V)};te(N,R=>{g(o).artist&&R(U)})}y(p),Y(()=>$(Q,g(o).title)),O(d,p)},I=d=>{var p=Ke();O(d,p)};te(x,d=>{g(o)?d(S):d(I,!1)})}y(h),y(T);var k=C(T,2),D=C(E(k),2);ie(D,5,()=>g(u),se,(d,p)=>{ve(d,{get song(){return g(p)},$$events:{playNow:m=>f(m.detail),playNext:m=>n(m.detail),addToQueue:m=>l(m.detail)}})}),y(D),y(k),y(c),We(i,()=>g(a),d=>H(a,d)),W("input",i,t),O(e,c)}export{la as component};
