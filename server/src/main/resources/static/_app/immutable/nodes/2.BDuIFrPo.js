import{f as F,a as D,c as ne}from"../chunks/V_t6QY-Y.js";import{i as fe}from"../chunks/Dw0rFIZ6.js";import{o as ie}from"../chunks/DC7TjNil.js";import{O as L,h as E,a3 as ve,e as J,H as ue,G as ce,t as _,T as oe,J as de,K as _e,M as Q,P,i as V,aa as me,ac as he,ad as pe,c as I,f as K,s as ge,ae,af as be,ag as q,ah as Z,ai as xe,aj as ye,ak as Ee,r as re,p as Te,al as U,ab as ke,am as Se,an as we,ao as Ae,d as Ie,ap as Ce,aq as De,l as M,ar as Me,as as Ne,D as N,E as C,F as te,at as Re,B as He,z as Oe,au as Ve,av as qe,C as Fe,V as A,A as Be}from"../chunks/CXwhW-Vy.js";import{p as $,i as j}from"../chunks/BO-TAqRd.js";import{r as Le}from"../chunks/BYixpyx2.js";import{s as ee}from"../chunks/qh6SEx0q.js";function Pe(e,a){return a}function Ue(e,a,r){for(var c=[],v=a.length,l=0;l<v;l++)Se(a[l].e,c,!0);we(c,()=>{var s=c.length===0&&r!==null;if(s){var t=r,o=t.parentNode;Ae(o),o.append(t),e.items.clear(),x(e,a[0].prev,a[v-1].next)}for(var i=0;i<v;i++){var f=a[i];s||(e.items.delete(f.k),x(e,f.prev,f.next)),Ie(f.e,!s)}e.first===a[0]&&(e.first=a[0].prev)})}function Ye(e,a,r,c,v,l=null){var s=e,t=new Map,o=null;{var i=e;s=E?L(ve(i)):i.appendChild(J())}E&&ue();var f=null,u=oe(()=>{var h=r();return be(h)?h:h==null?[]:ae(h)}),d,m=!0;function n(){ze(T,d,s,a,c),f!==null&&(d.length===0?(f.fragment?(s.before(f.fragment),f.fragment=null):re(f.effect),p.first=f.effect):Te(f.effect,()=>{f=null}))}var p=ce(()=>{d=_(u);var h=d.length;let g=!1;if(E){var R=de(s)===_e;R!==(h===0)&&(s=Q(),L(s),P(!1),g=!0)}for(var k=new Set,y=I,S=null,H=ge(),w=0;w<h;w+=1){E&&V.nodeType===me&&V.data===he&&(s=V,g=!0,P(!1));var B=d[w],O=c(B,w),b=m?null:t.get(O);b?(pe(b.v,B),b.i=w,H&&y.skipped_effects.delete(b.e)):(b=Ge(m?s:null,S,B,O,w,v,a,r),m&&(b.o=!0,S===null?o=b:S.next=b,S=b),t.set(O,b)),k.add(O)}if(h===0&&l&&!f)if(m)f={fragment:null,effect:K(()=>l(s))};else{var W=document.createDocumentFragment(),X=J();W.append(X),f={fragment:W,effect:K(()=>l(X))}}if(E&&h>0&&L(Q()),!m)if(H){for(const[le,se]of t)k.has(le)||y.skipped_effects.add(se.e);y.oncommit(n),y.ondiscard(()=>{})}else n();g&&P(!0),_(u)}),T={effect:p,items:t,first:o};m=!1,E&&(s=V)}function ze(e,a,r,c,v){var l=a.length,s=e.items,t=e.first,o,i=null,f=[],u=[],d,m,n,p;for(p=0;p<l;p+=1){if(d=a[p],m=v(d,p),n=s.get(m),e.first??=n,!n.o){n.o=!0;var T=i?i.next:t;x(e,i,n),x(e,n,T),Y(n,T,r),i=n,f=[],u=[],t=i.next;continue}if((n.e.f&U)!==0&&re(n.e),n!==t){if(o!==void 0&&o.has(n)){if(f.length<u.length){var h=u[0],g;i=h.prev;var R=f[0],k=f[f.length-1];for(g=0;g<f.length;g+=1)Y(f[g],h,r);for(g=0;g<u.length;g+=1)o.delete(u[g]);x(e,R.prev,k.next),x(e,i,R),x(e,k,h),t=h,i=k,p-=1,f=[],u=[]}else o.delete(n),Y(n,t,r),x(e,n.prev,n.next),x(e,n,i===null?e.first:i.next),x(e,i,n),i=n;continue}for(f=[],u=[];t!==null&&t.k!==m;)(t.e.f&U)===0&&(o??=new Set).add(t),u.push(t),t=t.next;if(t===null)continue;n=t}f.push(n),i=n,t=n.next}if(t!==null||o!==void 0){for(var y=o===void 0?[]:ae(o);t!==null;)(t.e.f&U)===0&&y.push(t),t=t.next;var S=y.length;if(S>0){var H=l===0?r:null;Ue(e,y,H)}}}function Ge(e,a,r,c,v,l,s,t){var o=(s&ye)!==0,i=(s&Ee)===0,f=o?i?q(r,!1,!1):Z(r):r,u=(s&xe)===0?v:Z(v),d={i:u,v:f,k:c,a:null,e:null,o:!1,prev:a,next:null};try{if(e===null){var m=document.createDocumentFragment();m.append(e=J())}return d.e=K(()=>l(e,f,u,t)),a!==null&&(a.next=d),d}finally{}}function Y(e,a,r){for(var c=e.next?e.next.e.nodes_start:r,v=a?a.e.nodes_start:r,l=e.e.nodes_start;l!==null&&l!==c;){var s=ke(l);v.before(l),l=s}}function x(e,a,r){a===null?(e.first=r,e.effect.first=r&&r.e):(a.e.next&&(a.e.next.prev=null),a.next=r,a.e.next=r&&r.e),r===null?e.effect.last=a&&a.e:(r.e.prev&&(r.e.prev.next=null),r.prev=a,r.e.prev=a&&a.e)}function Je(e,a,r=a){var c=new WeakSet;Ce(e,"input",async v=>{var l=v?e.defaultValue:e.value;if(l=z(e)?G(l):l,r(l),I!==null&&c.add(I),await De(),l!==(l=a())){var s=e.selectionStart,t=e.selectionEnd,o=e.value.length;if(e.value=l??"",t!==null){var i=e.value.length;s===t&&t===o&&i>o?(e.selectionStart=i,e.selectionEnd=i):(e.selectionStart=s,e.selectionEnd=Math.min(t,i))}}}),(E&&e.defaultValue!==e.value||M(a)==null&&e.value)&&(r(z(e)?G(e.value):e.value),I!==null&&c.add(I)),Me(()=>{var v=a();if(e===document.activeElement){var l=Ne??I;if(c.has(l))return}z(e)&&v===G(e.value)||e.type==="date"&&!v&&!e.value||v!==e.value&&(e.value=v??"")})}function z(e){var a=e.type;return a==="number"||a==="range"}function G(e){return e===""?null:+e}var Ke=F('<div class="song p-2 border-b border-gray-300 flex justify-between items-center svelte-12mvvcb"><div><div class="font-semibold"> </div> <div class="text-sm text-gray-500"> </div></div> <button class="play-btn px-2 py-1 bg-blue-500 text-white rounded">Play</button></div>');function We(e,a){let r=$(a,"title",8),c=$(a,"artist",8);var v=Ke(),l=N(v),s=N(l),t=N(s,!0);C(s);var o=te(s,2),i=N(o,!0);C(o),C(l),Re(2),C(v),He(()=>{ee(t,r()),ee(i,c())}),D(e,v)}var Xe=F('<div class="results mt-4 space-y-2"></div>'),Qe=F('<p class="mt-4 text-gray-500">No results found</p>'),Ze=F('<div class="search-container p-4"><input type="text" placeholder="Search for songs..." class="border p-2 rounded w-full"/> <!></div>');function sa(e,a){Oe(a,!1);let r=q(""),c=q([]),v=q();async function l(){try{const u=await fetch(`/api/search?query=${encodeURIComponent(_(r))}`);u.ok?A(c,await u.json()):A(c,[])}catch(u){console.error("Search error:",u),A(c,[])}}ie(()=>clearTimeout(_(v))),Ve(()=>(_(r),_(v)),()=>{_(r).trim()!==""?(clearTimeout(_(v)),A(v,setTimeout(l,300))):A(c,[])}),qe(),fe();var s=Ze(),t=N(s);Le(t);var o=te(t,2);{var i=u=>{var d=Xe();Ye(d,5,()=>_(c),Pe,(m,n)=>{We(m,{get title(){return _(n),M(()=>_(n).title)},get artist(){return _(n),M(()=>_(n).artist)}})}),C(d),D(u,d)},f=u=>{var d=ne(),m=Be(d);{var n=p=>{var T=Qe();D(p,T)};j(m,p=>{_(r),M(()=>_(r).trim()!=="")&&p(n)},!0)}D(u,d)};j(o,u=>{_(c),M(()=>_(c).length>0)?u(i):u(f,!1)})}C(s),Je(t,()=>_(r),u=>A(r,u)),D(e,s),Fe()}export{sa as component};
